<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Infinite Scrolling Card System</title>
<link rel="stylesheet" href="styles.css">
</head>
<body>
<div class="container">
  <div class="card">
    <canvas id="canvas1"></canvas>
  </div>
  <div class="card"></div>
  <div class="card">
    Card1
  </div>
</div>

<!-- Account info circle and menu -->
<div class="account-info" id="accountInfo">AI</div>
<div class="account-menu" id="accountMenu">
  <a href="#" id="likedJobs">Liked Jobs</a>
  <a href="#" id="accountInfoMenu">Account Info</a>
  <a href="#" id="logout">Log Out</a>
</div>

<script type="module">
  import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/9.17.2/firebase-auth.js";
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.17.2/firebase-app.js";
  import { firebaseConfig } from "./firebase-config.js";

  // Initialize Firebase
  const firebaseApp = initializeApp(firebaseConfig);
  const auth = getAuth(firebaseApp);

  // DOM elements
  const accountInfo = document.getElementById('accountInfo');
  const accountMenu = document.getElementById('accountMenu');
  const likedJobs = document.getElementById('likedJobs');
  const accountInfoMenu = document.getElementById('accountInfoMenu');
  const logout = document.getElementById('logout');
  const login = document.getElementById('login');

  // Toggle account menu
  accountInfo.addEventListener('click', () => {
    accountMenu.style.display = accountMenu.style.display === 'block' ? 'none' : 'block';
  });

  // Add functionality to menu items
  likedJobs.addEventListener('click', () => {
    // Redirect to liked jobs page
    window.location.href = 'liked-jobs.html';
  });

  accountInfoMenu.addEventListener('click', () => {
    // Redirect to account info page
    window.location.href = 'account-info.html';
  });

  logout.addEventListener('click', () => {
    signOut(auth).then(() => {
      alert('Signed out successfully!');
      window.location.href = 'index.html';
    }).catch((error) => {
      console.error('Error signing out: ', error);
      alert('Sign-out failed. Please try again.');
    });
  });

  login.addEventListener('click', () => {
    window.location.href = 'login.html';
  });

  // Check authentication state and update UI
  onAuthStateChanged(auth, (user) => {
    if (user) {
      // User is signed in
      logout.style.display = 'block';
      login.style.display = 'none';
    } else {
      // User is signed out
      logout.style.display = 'none';
      login.style.display = 'block';
    }
  });

  // Close menu if clicked outside
  window.addEventListener('click', (event) => {
    if (!accountInfo.contains(event.target) && !accountMenu.contains(event.target)) {
      accountMenu.style.display = 'none';
    }
  });
</script>
<script type="module" src="script.js"></script>
</body>
</html>